#include <array>
#include <iostream>
#include <random>
#include <vector>
#include <memory>
#include <Eigen/Dense>

#include "slam.h"

int main()
{
    // Test

    // Waypoints info
    Eigen::MatrixXf WP = Eigen::MatrixXf::Zero(2, 5);
    WP.setZero(2, 5);
    WP(0, 0) = 0.0F;
    WP(0, 1) = 997.98387096774193548387096774194F;
    WP(0, 2) = 4028.897849462364320061169564724F;
    WP(0, 3) = -1058.4677419354838709677419354839F;
    WP(0, 4) = -4976.478494623655933537520468235F;
    WP(1, 0) = 0.0F;
    WP(1, 1) = -2038.2165605095560749759897589684F;
    WP(1, 2) = 1707.0063694267500977730378508568F;
    WP(1, 3) = 1987.2611464968140353448688983917F;
    WP(1, 4) = 1464.9681528662404161877930164337F;

    // Landmarks info
    Eigen::MatrixXf LM = Eigen::MatrixXf::Zero(2, 13);
    LM.setZero(2, 13);
    LM(0, 0)  = 1286.9623655913983384380117058754F;
    LM(0, 1)  = -16.801075268817204301075268817204F;
    LM(0, 2)  = 2879.7043010752677218988537788391F;
    LM(0, 3)  = 4042.3387096774185920367017388344F;
    LM(0, 4)  = 2510.0806451612897944869473576546F;
    LM(0, 5)  = -1871.6397849462364320061169564724F;
    LM(0, 6)  = -2120.2956989247313686064444482327F;
    LM(0, 7)  = -3618.9516129032253957120701670647F;
    LM(0, 8)  = -4210.3494623655915347626432776451F;
    LM(0, 9)  = -4317.8763440860211630933918058872F;
    LM(0, 10) = 534.2741935483870967741935483871F;
    LM(0, 11) = -910.61827956989236554363742470741F;
    LM(0, 12) = -4290.9946236559135286370292305946F;
    LM(1, 0)  = 203.82165605095541401273885350318F;
    LM(1, 1)  = -1095.5414012738865494611673057079F;
    LM(1, 2)  = -2942.6751592356704350095242261887F;
    LM(1, 3)  = -76.433121019108280254777070063694F;
    LM(1, 4)  = 3108.2802547770697856321930885315F;
    LM(1, 5)  = 4076.4331210191066929837688803673F;
    LM(1, 6)  = 191.08280254777070063694267515924F;
    LM(1, 7)  = -3770.7006369426762830698862671852F;
    LM(1, 8)  = -1235.6687898089185182470828294754F;
    LM(1, 9)  = 4089.1719745222908386494964361191F;
    LM(1, 10) = 4789.8089171974515920737758278847F;
    LM(1, 11) = 2420.3821656050940873683430254459F;
    LM(1, 12) = 1286.6242038216551009099930524826F;

    std::shared_ptr<Slam> slam(new Slam(LM, WP));
    slam.get()->landmarkBasedNavigation();

    return 0;
}
